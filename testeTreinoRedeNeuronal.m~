clear all;
close all;
clc;

datasetDir = 'Imagens/Formas_2/';
numRotations = 0;
imageSize = 20;
hogFeatures = 0;
boundaries = 0;
% hogFeaturesStrongest = 0;
% wantedCornerPoints = 5;

% TRAINING SETS

% trainingSet = [];
% tempImage = medfilt2(imread('Imagens/Formas_2/circle/107.png'),[8 8],'symmetric');
% strongest = selectStrongest(detectHarrisFeatures(tempImage),wantedCornerPoints);
% disp(strongest.Count);
% teste = reshape(extractHOGFeatures(tempImage,strongest,'CellSize',[8 8]),1,[]);
% asd = zeros(1,(wantedCornerPoints-strongest.Count)*36);
% teste = [teste asd];
% % hogFeaturesArray = [hogFeaturesArray zeros((wantedCornerPoints-strongest.Count)*36)];
% trainingSet = vertcat(trainingSet,asd);

% if hogFeaturesStrongest
%     tempImage = medfilt2(imread(circleImageDatabase.ImageLocation{i}),[8 8],'symmetric');
%     strongest = selectStrongest(detectHarrisFeatures(tempImage),wantedCornerPoints);
%     hogFeaturesArray = reshape(extractHOGFeatures(tempImage,strongest,'CellSize',[8 8]),1,[]);
%     hogFeaturesArray = [hogFeaturesArray zeros(1,(wantedCornerPoints-strongest.Count)*36)];
%     trainingSet = vertcat(trainingSet,hogFeaturesArray);
% end

% % TEST SETS
% testSet = [];
% targetTestSet = [];

% [trainingSet,targetTrainingSet] = datasetGenerator(datasetDir,numRotations,imageSize,hogFeatures,boundaries);
% 
% net = feedforwardnet(10);
% % net = patternnet(10);
% net = train(net,trainingSet,targetTrainingSet);
% out=sim(net,trainingSet);
% 
% r=0;
% for i=1:length(out)
%     a = out(i);
%     b = targetTrainingSet(i);
%     if abs(a-b) < 0.01
%         r = r+1;
%     end
% end
% 
% precisao = r/length(out)*100

subplot(1,3,1);
imshow(imageProcesser(imread('Imagens/Formas_2/circle/107.png'),20,0,0),'InitialMagnification','fit');
axis on;
subplot(1,3,2);
imshow(imageProcesser(imread('Imagens/Formas_2/circle/107.png'),20),0,0,'InitialMagnification','fit');
axis on;
subplot(1,3,3);
imshow(imageProcesser(imread('Imagens/Formas_2/circle/107.png'),20),'InitialMagnification','fit');
axis on;